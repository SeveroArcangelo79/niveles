<!doctype html><html lang="es"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Niveles de Señal</title><style>:root{--bg:#fff7ed;--container:#ffffff;--header:#ea580c;--wave:#93c5fd;--axis:#e5e7eb;--text:#374151;--textLight:#6b7280;--safe:#2ecc71;--clip:#e74c3c}*{box-sizing:border-box}body{margin:0;background:var(--bg);font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;color:var(--text)}.container{max-width:1150px;margin:20px auto;background:#fff;border-radius:16px;box-shadow:0 20px 25px -5px rgba(0,0,0,.1);border:1px solid var(--axis);overflow:hidden}header{background:var(--header);color:#fff;padding:16px}header h1{margin:0;font-size:1.25rem}header p{margin:4px 0 0;font-size:.875rem;color:#ffedd5}main{display:grid;grid-template-columns:380px 1fr;gap:16px;padding:16px}.card{border:1px solid #f3f4f6;border-radius:14px;padding:16px;background:#fff}.card h2{margin:0 0 12px;font-size:.95rem}.field{margin-top:12px}label{font-size:.875rem;font-weight:500}.row{display:flex;gap:10px;align-items:center}.row input[type=range]{flex:1}.row input[type=number]{width:88px}input,select{padding:10px 12px;border-radius:12px;border:1px solid var(--axis);outline-offset:2px}input:focus,select:focus{outline:2px solid #fdba74}.hint{font-size:.75rem;color:var(--textLight);margin-top:6px}.group{margin-top:16px}.group-title{font-size:.75rem;font-weight:700;color:var(--textLight);letter-spacing:.06em;text-transform:uppercase;margin-bottom:8px}.kv{display:grid;grid-template-columns:1fr auto;gap:10px;padding:6px 0}.k{font-size:.875rem}.v{font-family:monospace;font-weight:700}.divider{height:1px;background:#f3f4f6;margin:12px 0}canvas{width:100%;height:520px;display:block;background:#f9fafb;cursor:crosshair}.value-display{position:absolute;top:16px;right:16px;background:rgba(255,255,255,.92);border:1px solid var(--axis);border-radius:10px;padding:8px 10px;font-family:monospace;font-size:.875rem}@media(max-width:900px){main{grid-template-columns:1fr}}</style></head><body><div class="container"><header><h1>Niveles de Señal</h1><p>0 dBFS → +24 dBu (headroom −20 dBFS @ +4 dBu)</p></header><main><section><div class="card"><h2>Configuración</h2><div class="field"><label>Tipo de señal</label> <select id="waveform"><option>Senoidal</option><option>Cuadrada</option><option>Triángular</option><option>Diente de Sierra</option></select></div><div class="field"><label>Nivel</label><div class="row"><input id="gain" type="range" min="0" max="1.5" step="0.01" value="1"><input id="gainText" type="number" step="0.01" value="1.00"></div><div class="hint">Valores &gt; 1.00 muestran saturación</div></div><div class="field"><label>Posición de la muestra</label><div class="row"><input id="timeIndex" type="range" min="0" max="999" value="250"><input id="timeText" type="number" value="250"></div></div></div><div class="card"><h2>Valores convertidos</h2><div class="group"><div class="group-title">Nivel de muestra</div><div class="kv"><div class="k">Valor fraccional (raw)</div><div class="v" id="raw"></div></div></div><div class="divider"></div><div class="group"><div class="group-title">Representación digital</div><div class="kv"><div class="k">Entero 8-bit unipolar</div><div class="v" id="u8"></div></div><div class="kv"><div class="k">Entero 8-bit bipolar</div><div class="v" id="s8"></div></div><div class="kv"><div class="k">Entero 16-bit unipolar</div><div class="v" id="u16"></div></div><div class="kv"><div class="k">Entero 16-bit bipolar</div><div class="v" id="s16"></div></div></div><div class="divider"></div><div class="group"><div class="group-title">Niveles de medición</div><div class="kv"><div class="k">Nivel en dBFS</div><div class="v" id="dbfs" aria-live="polite"></div></div><div class="kv"><div class="k">Nivel en dBu</div><div class="v" id="dbu" aria-live="polite"></div></div></div></div></section><section style="position:relative"><canvas id="plot"></canvas><div class="value-display">θ=<span id="theta"></span><br>raw=<span id="rawR"></span><br>clip=<span id="clipR"></span></div></section></main></div><script>
(()=>{const M=Math,P=M.PI,TA=2*P,D=document,G=i=>D.getElementById(i),S=new Float64Array(1e3),B=new Float64Array(1e3),R=new Float64Array(1e3),K=new Float64Array(1e3);let d=Math.max(1,window.devicePixelRatio||1),gm=null;for(let i=0;i<1e3;i++)S[i]=i/999*TA;const Z=(x,a,b)=>M.max(a,M.min(b,x)),cv=G("plot"),cx=cv.getContext("2d"),rz=()=>{let r=cv.getBoundingClientRect();cv.width=r.width*d;cv.height=r.height*d};rz();const wf=t=>{let x=t/TA;switch(G("waveform").value){case"Cuadrada":return M.sin(t)>=0?1:-1;case"Triángular":return x<.25?4*x:x<.75?2-4*x:-4+4*x;case"Diente de Sierra":return 2*x-1;default:return M.sin(t)}},rs=()=>{let g=parseFloat(G("gain").value);for(let i=0;i<1e3;i++){B[i]=wf(S[i]);R[i]=B[i]*g;K[i]=Z(R[i],-1,1)}},_U=(v,b)=>{let m=(1<<b)-1;return M.min(m,M.max(0,M.round((v+1)/2*m)))},_S=(v,b)=>{let p=(1<<(b-1))-1,n=1<<(b-1);return v>=0?M.min(p,M.round(v*p)):M.max(-n,M.round(v*n))},_D=v=>M.abs(v)<1e-9?-Infinity:20*M.log10(M.abs(v)),uP=()=>{let i=parseInt(G("timeIndex").value,10);G("theta").textContent=S[i].toFixed(4);G("rawR").textContent=R[i].toFixed(4);G("clipR").textContent=K[i].toFixed(4);G("raw").textContent=R[i].toFixed(4);G("u8").textContent=_U(K[i],8);G("s8").textContent=_S(K[i],8);G("u16").textContent=_U(K[i],16);G("s16").textContent=_S(K[i],16);let b=_D(R[i]);G("dbfs").textContent=isFinite(b)?b.toFixed(2)+" dBFS":"-inf dBFS";G("dbu").textContent=isFinite(b)?(b+24).toFixed(2)+" dBu":"-inf dBu"},clX=x=>{if(!gm)return 0;let r=cv.getBoundingClientRect();return Z((x-r.left)*d-gm.x,0,gm.w)/gm.w},xt=[{v:0,l:"0"},{v:P/2,l:"π/2"},{v:P,l:"π"},{v:3*P/2,l:"3π/2"},{v:2*P,l:"2π"}],yt=[-1.5,-1,-.5,-.25,0,.25,.5,1,1.5],Dr=()=>{cx.clearRect(0,0,cv.width,cv.height);let W=cv.width,H=cv.height,pL=64*d,pT=28*d,pB=54*d,x0=pL,y0=pT,x1=W-64*d,y1=H-pB,pw=x1-x0,ph=y1-y0;const X=th=>x0+(th/TA)*pw,Y=v=>y0+(1-(v+1.6)/3.2)*ph;cx.fillStyle="#f9fafb";cx.fillRect(0,0,W,H);cx.strokeStyle="#e5e7eb";cx.lineWidth=d;xt.forEach(k=>{cx.beginPath();let x=X(k.v);cx.moveTo(x,y0);cx.lineTo(x,y1);cx.stroke()});yt.forEach(v=>{cx.beginPath();let y=Y(v);cx.moveTo(x0,y);cx.lineTo(x1,y);cx.stroke()});cx.strokeStyle="#d1d5db";cx.strokeRect(x0,y0,pw,ph);cx.save();cx.setLineDash([6*d,6*d]);cx.strokeStyle="rgba(55,65,81,0.6)";[1,-1].forEach(v=>{let y=Y(v);cx.beginPath();cx.moveTo(x0,y);cx.lineTo(x1,y);cx.stroke()});cx.restore();cx.fillStyle="rgba(46,204,113,0.35)";cx.beginPath();cx.moveTo(X(S[0]),Y(0));for(let i=0;i<1e3;i++)cx.lineTo(X(S[i]),Y(K[i]));cx.lineTo(X(S[999]),Y(0));cx.fill();cx.fillStyle="rgba(231,76,60,0.45)";let on=0;cx.beginPath();for(let i=0;i<1e3;i++){if(R[i]>1){if(!on){cx.moveTo(X(S[i]),Y(1));on=1}cx.lineTo(X(S[i]),Y(R[i]))}else if(on){cx.lineTo(X(S[i-1]),Y(1));cx.fill();cx.beginPath();on=0}}if(on){cx.lineTo(X(S[999]),Y(1));cx.fill()}on=0;cx.beginPath();for(let i=0;i<1e3;i++){if(R[i]<-1){if(!on){cx.moveTo(X(S[i]),Y(-1));on=1}cx.lineTo(X(S[i]),Y(R[i]))}else if(on){cx.lineTo(X(S[i-1]),Y(-1));cx.fill();cx.beginPath();on=0}}if(on){cx.lineTo(X(S[999]),Y(-1));cx.fill()}let gr=cx.createLinearGradient(x0,0,x1,0);gr.addColorStop(0,"rgba(147,197,253,0)");gr.addColorStop(.2,"rgba(147,197,253,0.6)");gr.addColorStop(1,"rgba(147,197,253,1)");cx.strokeStyle=gr;cx.lineWidth=3*d;cx.setLineDash([6*d,6*d]);cx.beginPath();cx.moveTo(X(S[0]),Y(K[0]));for(let i=1;i<1e3;i++)cx.lineTo(X(S[i]),Y(K[i]));cx.stroke();cx.setLineDash([]);let idx=parseInt(G("timeIndex").value,10),mx=X(S[idx]),my=Y(K[idx]);cx.save();cx.setLineDash([3*d,6*d]);cx.strokeStyle="#ea580c";cx.lineWidth=2*d;cx.beginPath();cx.moveTo(x0,my);cx.lineTo(x1,my);cx.stroke();cx.restore();cx.fillStyle="#ea580c";cx.strokeStyle="#111827";cx.lineWidth=2*d;cx.beginPath();cx.arc(mx,my,7*d,0,TA);cx.fill();cx.stroke();cx.fillStyle="#6b7280";cx.font=12*d+"px Arial";cx.textAlign="center";cx.textBaseline="top";xt.forEach(k=>cx.fillText(k.l,X(k.v),y1+10*d));cx.textAlign="right";cx.textBaseline="middle";yt.forEach(v=>cx.fillText(v,x0-10*d,Y(v)));cx.textAlign="left";yt.forEach(v=>{let l="-inf";if(v!==0){let db=20*M.log10(M.abs(v));l=isFinite(db)?db.toFixed(1):"-inf"}cx.fillText(l,x1+10*d,Y(v))});cx.fillStyle="#374151";cx.font=12*d+"px Arial";cx.textAlign="center";cx.textBaseline="bottom";cx.fillText("Fase θ (radianes)",(x0+x1)/2,H-12*d);cx.save();cx.translate(18*d,(y0+y1)/2);cx.rotate(-P/2);cx.textAlign="center";cx.textBaseline="top";cx.fillText("Nivel (Fraccional Bipolar)",0,0);cx.restore();cx.save();cx.translate(W-18*d,(y0+y1)/2);cx.rotate(-P/2);cx.fillText("Nivel (dBFS)",0,0);cx.restore();gm={x:x0,w:pw,X:X,Y:Y};uP()},E=e=>D.getElementById(e).addEventListener,ch=(e,f)=>{E(e)("change",()=>{f();rs();Dr()});E(e)("input",()=>{f();rs();Dr()})};E("waveform")("change",()=>{rs();Dr()});E("gain")("input",()=>{G("gainText").value=parseFloat(G("gain").value).toFixed(2);rs();Dr()});E("gainText")("change",()=>{let v=parseFloat(G("gainText").value);if(isFinite(v)){v=Z(v,0,1.5);G("gain").value=v;G("gainText").value=v.toFixed(2);rs();Dr()}});E("timeIndex")("input",()=>{G("timeText").value=G("timeIndex").value;Dr()});E("timeText")("change",()=>{let v=parseInt(G("timeText").value,10);if(isFinite(v)){v=Z(v,0,999);G("timeIndex").value=v;G("timeText").value=v;Dr()}});const mh=e=>{if(!gm)return;let p=cv.getBoundingClientRect(),idx=M.round(Z(((e.clientX-p.left)*d-gm.x)/gm.w,0,1)*999);G("timeIndex").value=idx;G("timeText").value=idx;Dr()};cv.addEventListener("pointerdown",e=>{cv.setPointerCapture(e.pointerId);mh(e)});cv.addEventListener("pointermove",e=>{if(e.buttons===1)mh(e)});let mq=window.matchMedia(`(resolution:${window.devicePixelRatio}dppx)`);mq.addListener(()=>{d=window.devicePixelRatio||1;rz();Dr()});window.onresize=()=>{rz();Dr()};rs();Dr()})();
</script></body></html>